name: CodeRabbit AI Review

on:
  pull_request:
    types: [opened, synchronize, reopened]
  issue_comment:
    types: [created, edited]

permissions:
  contents: read
  pull-requests: write
  issues: write

# CodeRabbitã®è¨­å®š
# ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªãªã®ã§ç„¡æ–™ã§åˆ©ç”¨å¯èƒ½
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †:
# 1. https://coderabbit.ai ã«ã‚¢ã‚¯ã‚»ã‚¹
# 2. GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³
# 3. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«CodeRabbitã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# 4. è‡ªå‹•çš„ã«PRãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé–‹å§‹ã•ã‚Œã¾ã™

jobs:
  notify:
    runs-on: ubuntu-latest
    if: github.event_name == 'pull_request' && github.event.action == 'opened'

    steps:
      - name: Comment setup instructions
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const body = `## ğŸ° CodeRabbit AI ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã¤ã„ã¦

            ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§CodeRabbit AIã«ã‚ˆã‚‹è‡ªå‹•ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ï¼š

            1. [CodeRabbit](https://coderabbit.ai)ã«ã‚¢ã‚¯ã‚»ã‚¹
            2. GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³
            3. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªï¼ˆHondy000/claude-code-playgroundï¼‰ã‚’é¸æŠã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

            ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªãªã®ã§**æ°¸ä¹…ç„¡æ–™**ã§åˆ©ç”¨ã§ãã¾ã™ï¼`;

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: body
            });
